<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>The Tectonic Typesetting System</title>
        
        <meta name="robots" content="noindex" />
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="A manual for the Tectonic typesetting system">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">Overview</a></li><li class="chapter-item expanded "><a href="introduction/index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="getting-started/index.html"><strong aria-hidden="true">2.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="getting-started/install.html"><strong aria-hidden="true">2.1.</strong> Install Tectonic</a></li><li class="chapter-item expanded "><a href="getting-started/first-document.html"><strong aria-hidden="true">2.2.</strong> Build Your First Document</a></li><li class="chapter-item expanded "><a href="getting-started/unicode.html"><strong aria-hidden="true">2.3.</strong> Use a Unicode Font</a></li></ol></li><li class="chapter-item expanded "><a href="lang-impl/index.html"><strong aria-hidden="true">3.</strong> The Tectonic Implementation of the TeX Language</a></li><li class="chapter-item expanded affix "><li class="part-title">“V2” Command-Line Interface</li><li class="chapter-item expanded "><a href="v2cli/build.html"><strong aria-hidden="true">4.</strong> tectonic -X build</a></li><li class="chapter-item expanded "><a href="v2cli/new.html"><strong aria-hidden="true">5.</strong> tectonic -X new</a></li><li class="chapter-item expanded affix "><li class="part-title">Concept Reference</li><li class="chapter-item expanded "><a href="ref/documents.html"><strong aria-hidden="true">6.</strong> Documents</a></li><li class="chapter-item expanded "><a href="ref/tectonic-toml.html"><strong aria-hidden="true">7.</strong> The Tectonic.toml File</a></li><li class="chapter-item expanded "><a href="ref/v1cli.html"><strong aria-hidden="true">8.</strong> “V1” Command-Line Interface</a></li><li class="chapter-item expanded "><a href="ref/v2cli.html"><strong aria-hidden="true">9.</strong> “V2” Command-Line Interface</a></li><li class="chapter-item expanded "><a href="ref/workspaces.html"><strong aria-hidden="true">10.</strong> Workspaces</a></li><li class="chapter-item expanded affix "><li class="part-title">Appendices</li><li class="chapter-item expanded "><a href="installation/index.html"><strong aria-hidden="true">11.</strong> Installation Guide</a></li><li class="chapter-item expanded "><a href="cookbook/cargo-vcpkg.html"><strong aria-hidden="true">12.</strong> Building Tectonic with cargo vcpkg</a></li><li class="chapter-item expanded "><a href="cookbook/vcpkg.html"><strong aria-hidden="true">13.</strong> Building Tectonic with manual vcpkg on macOS</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">The Tectonic Typesetting System</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        <a href="https://github.com/tectonic-typesetting/tectonic" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#the-tectonic-typesetting-system" id="the-tectonic-typesetting-system">The Tectonic Typesetting System</a></h1>
<p>Tectonic is a modernized, complete, self-contained
<a href="https://en.wikipedia.org/wiki/TeX">TeX</a>/<a href="https://www.latex-project.org/">LaTeX</a>
engine, powered by <a href="http://xetex.sourceforge.net/">XeTeX</a> and
<a href="https://www.tug.org/texlive/">TeXLive</a>. This book aims to document the core
elements of the Tectonic software system.</p>
<p>Without further ado, we suggest you start with the <a href="./introduction/index.html">Introduction</a>!</p>
<h2><a class="header" href="#contributions-are-welcome" id="contributions-are-welcome">Contributions are welcome!</a></h2>
<p>This book is, clearly, a work in progress! Contributions of any kind are most
welcome — please see the discussion in
<a href="https://github.com/tectonic-typesetting/tectonic/issues/62">GitHub issue #62</a>
for some ideas of things that should be documented here.</p>
<p>The documentation is written in <a href="https://commonmark.org/">Markdown</a> (specifically, CommonMark using
<a href="https://crates.io/crates/pulldown-cmark">pulldown-cmark</a>) and rendered into HTML using <a href="https://rust-lang-nursery.github.io/mdBook/">mdbook</a>. The source code lives
in the <code>docs/</code> subdirectory of <a href="https://github.com/tectonic-typesetting/tectonic">the main tectonic repository</a>. To make and view
changes, all you need to do is <a href="https://github.com/rust-lang-nursery/mdBook#installation">install mdbook</a>, then run the command:</p>
<pre><code class="language-sh">$ mdbook serve
</code></pre>
<p>in the <code>docs/</code> directory.</p>
<p>Members of the Tectonic community are eager to help if you run into any issues —
please launch a thread on <a href="https://tectonic.newton.cx/">the Tectonic forum</a> if you’d like to get involved!</p>
<h1><a class="header" href="#introduction" id="introduction">Introduction</a></h1>
<p>This book describes the Tectonic typesetting system. The goal of the Tectonic
project is to empower people to create beautiful, effective technical
documents.</p>
<h2><a class="header" href="#technical-documents" id="technical-documents">Technical documents</a></h2>
<p>What do we mean by “technical documents”? While the Tectonic project seeks to
cast its net as widely as possible, common examples might be software manuals,
scientific papers, or analytical reports. What features do such documents
include that traditional authoring frameworks have trouble supporting?</p>
<ul>
<li><strong>Mathematics</strong>. Any kind of mathematical typesetting is challenging.
<em>Beautiful</em> mathematical typesetting is <em>extremely hard</em> and requires deep
integration with the overall typesetting system.</li>
<li><strong>Abundant cross-references</strong>. Technical documents often involve extensive
internal and external cross-references (links), and managing such links is a
nightmare without extremely good tooling support.</li>
<li><strong>Rich content</strong>. Technical documents also generally include a great deal of
rich content beyond their text, such as figures, tables, and code. In the
best documents, this content is seamlessly integrated into the document
presentation, with precise author control over that presentation.</li>
<li><strong>Integrated computation</strong>. In the 21st century, it is finally possible to
integrate computation — runnable code samples, interactive graphics,
live-updating data, and so on — into documents, and it is becoming clear
that this is new capability is not just evolutionary, but revolutionary.</li>
<li><strong>Hackability</strong>. Finally, we also believe that technical documents should
ideally be “hackable,” meaning that people should be able to see how they
work “under the hood” and use them as a basis for their own creations.</li>
</ul>
<h2><a class="header" href="#tectonic-and-tex" id="tectonic-and-tex">Tectonic and TeX</a></h2>
<p>At the core of Tectonic is a modernized, complete, self-contained
<a href="https://en.wikipedia.org/wiki/TeX">TeX</a>/<a href="https://www.latex-project.org/">LaTeX</a> engine, powered by <a href="http://xetex.sourceforge.net/">XeTeX</a> and <a href="https://www.tug.org/texlive/">TeXLive</a>.</p>
<p>For those new to it, <a href="https://en.wikipedia.org/wiki/TeX">TeX</a> is a programming language. While most programming
languages create software, <a href="https://en.wikipedia.org/wiki/TeX">TeX</a> creates typeset documents. <a href="https://en.wikipedia.org/wiki/TeX">TeX</a> is quite
archaic in some ways, but in many fields it’s still the tool of choice for
authoring the kinds of documents described above.</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/TeX">TeX</a> is absolutely unparalleled in its ability to typeset math. Workers in
virtually every mathematics-heavy field use <a href="https://en.wikipedia.org/wiki/TeX">TeX</a> to create documents.</li>
<li>The <a href="https://en.wikipedia.org/wiki/TeX">TeX</a> ecosystem provides infrastructure for deep and rich
cross-referencing with programs like <a href="http://www.bibtex.org/">bibtex</a>.</li>
<li>Another hallmark of the <a href="https://en.wikipedia.org/wiki/TeX">TeX</a> ecosystem is longstanding support for complex
figures, tables, and other forms of rich content included in the document.</li>
<li>Because <a href="https://en.wikipedia.org/wiki/TeX">TeX</a> is a programming language for creating documents, <a href="https://en.wikipedia.org/wiki/TeX">TeX</a>-based
documents can be hackable in exactly the same way as the open-source
programs that underly so much of the modern software ecosystem.</li>
</ul>
<p>The fundamental principle underlying the Tectonic project is that <a href="https://en.wikipedia.org/wiki/TeX">TeX</a> is,
and can continue to be, the best language out there for creating the
beautiful, effective technical documents that the world deserves. The <a href="https://en.wikipedia.org/wiki/TeX">TeX</a>
language is an amazingly clever piece of engineering, and the fact that it’s
still in use 40 years (!) after its creation speaks for itself. But by the
same token, there is a <em>lot</em> about the <a href="https://en.wikipedia.org/wiki/TeX">TeX</a> software ecosystem that is
archaic and outdated. The goal of Tectonic is to build on the good stuff and
leave behind the things that don’t make sense anymore.</p>
<p>In particular, Tectonic is derived from the source code that powers the
<a href="http://xetex.sourceforge.net/">XeTeX</a> engine, and the bulk of its code is the same core engine that
implements the complex, Unicode-aware typesetting performed by <a href="http://xetex.sourceforge.net/">XeTeX</a>.
Tectonic provides both a new user experience around that engine, and several
key interventions that enable the engine to be used in fundamentally new ways.</p>
<h2><a class="header" href="#the-goals-of-tectonic" id="the-goals-of-tectonic">The goals of Tectonic</a></h2>
<p>As stated above, the overall goal of the Tectonic project is to enable people
to create beautiful, effective technical documents. In particular, there are
several elements of the existing <a href="https://en.wikipedia.org/wiki/TeX">TeX</a> ecosystem that Tectonic aims to improve
upon:</p>
<ul>
<li><em>User experience</em>. Many aspects of the classic <a href="https://en.wikipedia.org/wiki/TeX">TeX</a> user experience (UX)
are bizarre and unpleasant to modern users. In particular, its error
messages and diagnostic output can be utterly mystifying. Tectonic chooses
to break compatibility with classic <a href="https://en.wikipedia.org/wiki/TeX">TeX</a> when doing so offers the chance to
improve the UX.</li>
<li><em>Embeddability</em>. The modern <a href="https://en.wikipedia.org/wiki/TeX">TeX</a> software system consists of a suite of
interacting command-line programs modifying a complex tree of thousands of
support files. This makes it extremely unpleasant to embed the <a href="https://en.wikipedia.org/wiki/TeX">TeX</a> engine
within other software systems, which prevents a whole host of exciting use
cases. Tectonic delivers its engine as a reusable software library and aims
to make that library easy to embed and reuse anywhere code can run.</li>
<li><em>Reproducibility</em>. For the same reasons that the classic <a href="https://en.wikipedia.org/wiki/TeX">TeX</a> experience is
difficult to embed, it is difficult to guarantee reproducible document
builds. For many technical documents, reproducibility is a highly-respected
virtue if not an outright requirement. Tectonic aims to enable easy,
byte-for-byte reproducible builds.</li>
<li><em>Web output</em>. Modern displays and Web browsers are incredibly powerful,
versatile tools. One of the motivations for the founding of the Tectonic
project was the belief that current Web-based technical documents are
falling far short of what should be possible, and the belief that some
changes in the core <a href="https://en.wikipedia.org/wiki/TeX">TeX</a> engine are necessary to fully unlock its ability
to produce excellent Web-based output.</li>
</ul>
<h1><a class="header" href="#getting-started" id="getting-started">Getting Started</a></h1>
<p>This chapter of the book will introduce you to Tectonic, with a special emphasis
on the ways that it’s different from the TeX systems that you might have seen
before. We’ll assume a very basic familiarity with TeX and LaTeX, and that you
know how to use a command-line interface on your computer.</p>
<p>The sections in this chapter are:</p>
<ol>
<li><a href="getting-started/./install.html">Install Tectonic</a></li>
<li><a href="getting-started/./first-document.html">Build your first document</a></li>
<li><a href="getting-started/./unicode.html">Use a Unicode font</a></li>
</ol>
<h1><a class="header" href="#getting-started-install-tectonic" id="getting-started-install-tectonic">Getting Started: Install Tectonic</a></h1>
<p>Let’s start out by making sure that Tectonic is installed on your system.</p>
<p>Even this step will be very different than what you might be used to with other
TeX systems. To install a normal TeX system such as <a href="https://www.tug.org/texlive/acquire-netinstall.html">TeXLive</a>, you normally need
to download gigabytes of support files and set them up in a complex directory
hierarchy. Tectonic, on the other hand, is distributed as a single executable
file. That one file not only combines the functionality of many standard TeX
programs, it also can download the many necessary support files on the fly. This
makes Tectonic super easy to install.</p>
<p>The quickest way to get started is to <a href="https://github.com/tectonic-typesetting/tectonic/releases/latest">download the latest release</a>
from GitHub, or to <a href="getting-started/../installation/index.html#pre-built-binary-packages">install a packaged version</a> if one is
available. If you’d like to see detailed instructions, go to the <a href="getting-started/../installation/index.html">Installation
Reference</a>. But the short version of the GitHub approach is that you
should:</p>
<ol>
<li>Click through to the most recent non-preview release</li>
<li>Download the <code>.tar.gz</code> or <code>.zip</code> file that corresponds to your computer’s
operating system and CPU type</li>
<li>Unpack that archive to obtain the <code>tectonic</code> executable file. (Or,
<code>tectonic.exe</code> on Windows.)</li>
<li>Put that file in the appropriate location so that you can easily run it from
your computer’s command prompt.</li>
</ol>
<p>That’s all there is to it! You’ll know that you’re set up when you can go to
your computer’s command prompt and run:</p>
<pre><code class="language-sh">$ tectonic --help
</code></pre>
<p>and the result is that you get a printout of information about different options
and arguments that you can pass to the Tectonic program. (Here and elsewhere
we’ll use a convention of a leading <code>$</code> to indicate a command that you should
run at your computer’s command prompt. You don’t type the dollar sign itself.)</p>
<p>To be explicit, <em>Tectonic does not invoke an external <code>latex</code> program, and
Tectonic is not a “wrapper” for (La)TeX.</em> Tectonic <em>is</em> the LaTeX program. This
is essential. <a href="getting-started/../introduction/index.html#the-goals-of-tectonic">The goals of the Tectonic project</a> involve a fundamental
transformation of how we use TeX to create technical documents, and it is not
possible to achieve that without radical surgery to the heart of how TeX has
traditionally operated.</p>
<h1><a class="header" href="#getting-started-build-your-first-document" id="getting-started-build-your-first-document">Getting Started: Build Your First Document</a></h1>
<p>Now that <a href="getting-started/./install.html">you’ve installed Tectonic</a>, let’s create and build your first
<a href="getting-started/../ref/documents.html">document</a>.</p>
<p><strong>Important:</strong> <em>From here on out, this <a href="getting-started/./index.html">Getting Started</a> guide will
use what we call the <a href="getting-started/../ref/v2cli.html">“V2” interface</a> to the Tectonic program. The V2
interface coexists with, but has a fairly different approach than, the <a href="getting-started/../ref/v1cli.html">“V1”
interface</a>. We are gradually migrating from V1 to V2. Neither interface
(V1 or V2) is the same as the one exposed by classic TeX tools such as
<code>pdflatex</code>.</em></p>
<h2><a class="header" href="#create-a-new-document" id="create-a-new-document">Create a new document</a></h2>
<p>The Tectonic <a href="getting-started/../ref/v2cli.html">V2 interface</a> has a “multitool” structure similar to that
of other powerful tools such as <a href="https://git-scm.com/">git</a> and <a href="https://doc.rust-lang.org/cargo/">cargo</a>. To create a new document, we
use a <a href="getting-started/../v2cli/new.html"><code>new</code></a> subcommand that looks like this:</p>
<pre><code class="language-sh">$ tectonic -X new myfirstdoc
</code></pre>
<p>This will create a new <a href="getting-started/../ref/workspaces.html">Tectonic workspace</a> directory named
<code>myfirstdoc</code> containing a file <code>Tectonic.toml</code> and a sub-directory named <code>src</code>.
Enter this new directory in your command prompt.</p>
<pre><code class="language-sh">$ cd myfirstdoc
</code></pre>
<p><strong>Note:</strong> <em>The <code>-X</code> flag activates the V2 interface. Don’t forget it! Eventually
it will become unnecessary and you’ll just be able to write <code>tectonic new</code>, but
that changeover hasn’t happened yet.</em></p>
<h2><a class="header" href="#basic-document-source-structure" id="basic-document-source-structure">Basic document source structure</a></h2>
<p>The source code to your document is stored in the <code>src</code> subdirectory of your new
document. Check it out:</p>
<pre><code class="language-sh">$ ls src
</code></pre>
<p>You’ll see three files that were created by the <a href="getting-started/../v2cli/new.html"><code>new</code></a> command:</p>
<ul>
<li><code>_preamble.tex</code></li>
<li><code>index.tex</code></li>
<li><code>_postamble.tex</code></li>
</ul>
<p>These files are pre-populated with extremely basic contents following this
suggested source structure:</p>
<ul>
<li>The “preamble” file should contain all of your (La)TeX initialization
boilerplate, up to and including the LaTeX <code>\begin{document}</code> command.</li>
<li>The “index” file contains all of your actual document content, without any of
the annoying boilerplate. When you create a new Tectonic document, it just
contains the text <code>Hello, world.</code></li>
<li>The “postamble” file should contain all of your cleanup code, starting with
the LaTeX <code>\end{document}</code> command. There will almost never need to be any
other content in this file.</li>
</ul>
<p>When Tectonic builds your document, it processes these files in the order listed
above, so all three of them need to be available. But the breakdown suggested
above is only a suggestion, nothing more. If you want all of your boilerplate
and content to be in a single file, we recommend putting it all in <code>index.tex</code>
and making your preamble and postamble be empty.</p>
<p>The motivation for this separation is partially stylistic, but not entirely so.
In the future, we anticipate that there might be different ways to build the
same document that invoke different preamble or postamble contents.</p>
<h2><a class="header" href="#building-your-document" id="building-your-document">Building your document</a></h2>
<p>To compile your document, run:</p>
<pre><code class="language-sh">$ tectonic -X build
</code></pre>
<p>If you haven’t run Tectonic on your computer before, this command will take a
minute or two as it downloads the support files that it needs and generates the
LaTeX “format file” storing the default macro collection. Tectonic will cache
these files and avoid downloading them again. Test it out by running the build
again:</p>
<pre><code class="language-sh">$ tectonic -X build
</code></pre>
<p>This time the command should finish much more quickly, with no messages about
downloading files. The output PDF document will be placed at the path
<code>build/default/default.pdf</code> relative to your document directory:</p>
<pre><code class="language-sh">$ ls -l build/default/
</code></pre>
<p>If you’re familiar with traditional TeX engines, you’ll have noticed that
Tectonic’s “user experience” is substantially different from those engines:</p>
<ol>
<li>Tectonic doesn’t print out the usual chatter — unless there’s an error.</li>
<li>Tectonic automatically reruns the TeX stage until its output stabilizes.</li>
<li>By default, Tectonic doesn’t write out intermediate files such as
(<code>texput.aux</code>, <code>texput.log</code>).</li>
<li>You ought not have seen this yet, but if you make a mistake in your TeX,
Tectonic will quit with an error message, rather than asking you to type <code>X2</code>
or whatever.</li>
</ol>
<p>We hope that you’ll agree that these changes make for a program that is much
more pleasant to use than the traditional tools.</p>
<h1><a class="header" href="#getting-started-use-a-unicode-font" id="getting-started-use-a-unicode-font">Getting Started: Use a Unicode Font</a></h1>
<p>You’ve <a href="getting-started/./first-document.html">created your first Tectonic document</a>. Great! Now, let’s
start exploring the ways in which Tectonic helps you create modern <a href="getting-started/../introduction/index.html#technical-documents">technical
documents</a>.</p>
<p>We’ve already seen a few ways that Tectonic differs from traditional TeX
engines. Perhaps the most fundamentally important difference, however, is the
one that we’ll explore in this section.</p>
<p><strong>Note:</strong> <em>This <a href="getting-started/./index.html">Getting Started</a> guide uses what we call the <a href="getting-started/../ref/v2cli.html">“V2”
interface</a> to the Tectonic command-line tool. The V2 interface coexists
with, but has a fairly different approach than, the <a href="getting-started/../ref/v1cli.html">“V1”interface</a>. We
are gradually migrating from V1 to V2. Neither interface (V1 or V2) is the same
as the one exposed by classic TeX tools such as <code>pdflatex</code>.</em></p>
<h2><a class="header" href="#unicode" id="unicode">Unicode</a></h2>
<p>When TeX was first developed <a href="https://en.wikipedia.org/wiki/TeX#History">more than 40 years ago</a>, digital
systems for representing human writing were pretty primitive. Because TeX needed
to represent a variety of languages <em>and</em> mathematics, it was endowed with
comparatively sophisticated tools to both accept and emit characters that aren’t
found in standard English. TeX’s good multi-lingual support was one of the
things that made it groundbreaking. Eventually, however, a consortium of major
technology companies developed the much more comprehensive <a href="https://home.unicode.org/">Unicode</a> standards
for representing the world’s writing systems digitally. By now, they’re
universally adopted. So while the TeX ecosystem started out ahead of the curve,
some of its core systems are designed around an incompatible and, frankly,
dead-end framework.</p>
<p>That is not to imply that the whole TeX universe is stuck in the past! Many
people have worked extremely hard to bridge the worlds of TeX and Unicode. The
code in Tectonic, in particular, is based on <a href="http://xetex.sourceforge.net/">XeTeX</a>, which adds Unicode support
to the classic TeX experience. Without the efforts of the <a href="http://xetex.sourceforge.net/">XeTeX</a> team and many
other dedicated volunteers in the TeX world, Tectonic wouldn’t be able to offer
Unicode support.</p>
<h2><a class="header" href="#modern-fonts" id="modern-fonts">Modern Fonts</a></h2>
<p>Tectonic’s support for Unicode allows it to take advantage of modern fonts that
are distributed using formats such as <a href="https://en.wikipedia.org/wiki/OpenType">OpenType</a>. Besides opening up access to a
whole world of typographic progress — a good font is the result of <em>years</em> of
expert effort — this support positions Tectonic to create outputs in not just
<a href="https://en.wikipedia.org/wiki/PDF">PDF</a> but <a href="https://en.wikipedia.org/wiki/HTML">HTML</a> formats. HTML capability is still under development, but it’s
one of the prime reasons that the Tectonic project was started.</p>
<p>The choice of fonts is foundational to TeX’s document processing, so modern
fonts aren’t automatically activated. To start using a nice new font like <a href="https://www.fontsquirrel.com/fonts/tex-gyre-pagella">TeX
Gyre Pagella</a> (derived from <a href="https://en.wikipedia.org/wiki/Palatino">Palatino</a>), open up your
<code>src/_preamble.tex</code> file and add the following lines after the <code>\documentclass</code>
command:</p>
<pre><code class="language-tex">\usepackage{fontspec}
\setmainfont{texgyrepagella}[
  Extension = .otf,
  UprightFont = *-regular,
  BoldFont = *-bold,
  ItalicFont = *-italic,
  BoldItalicFont = *-bolditalic,
]
</code></pre>
<p>Now rebuild your document:</p>
<pre><code class="language-sh">$ tectonic -X build
</code></pre>
<p>You’ll probably see Tectonic download some files: namely, the new font files
that you have started using. Tectonic’s ability to fetch such files on the fly
is why its installation is so much easier than a traditional TeX engine.</p>
<p>If you open up your rebuilt document, it will be using your new font, although
the difference can be difficult to detect with such a small amount of sample
text.</p>
<h2><a class="header" href="#unicode-input-text" id="unicode-input-text">Unicode Input Text</a></h2>
<p>Tectonic’s support for Unicode broadens its <em>output</em> capabilities through the
use of modern fonts. But that’s not all: Unicode also broadens Tectonic’s the
<em>inputs</em> that Tectonic accepts.</p>
<p>With Tectonic, you can type non-English characters directly into your input TeX
files, which are parsed assuming the virtually-universal <a href="https://en.wikipedia.org/wiki/UTF-8">UTF-8 Unicode text
encoding</a>. For instance, you can open up your <code>src/index.tex</code> file and
copy-paste in the following <a href="https://en.wikipedia.org/wiki/Le_Bateau_ivre">verse</a> with accented characters:</p>
<pre><code class="language-tex">Ô que ma quille éclate! Ô que j’aille à la mer!
</code></pre>
<p>Rebuild your document and see your new text in the output:</p>
<pre><code class="language-sh">$ tectonic -X build
</code></pre>
<p><em>Whatever</em>, you might say. <em>I know how to get these accented characters with TeX
commands:</em></p>
<pre><code class="language-tex">\^O que ma quille \'eclate! \^O que j'aille \`a la mer!
</code></pre>
<p>Fair enough. But now try typing in <a href="https://www.japantimes.co.jp/news/2019/10/19/national/history/frog-jump-bashos-pond/">Bashô’s “old pond” haiku</a>:</p>
<pre><code class="language-tex">古池や蛙飛び込む水の音
  ふるいけやかわずとびこむみずのおと
</code></pre>
<p>We’ll wait.</p>
<p>(Note, however, that if you copy-paste this text into our sample document, it
won’t work: you haven’t activated a font able to handle the Japanese characters.
You’ll get a lot of warnings to that effect.)</p>
<h1><a class="header" href="#the-tectonic-implementation-of-the-tex-language" id="the-tectonic-implementation-of-the-tex-language">The Tectonic Implementation of the TeX Language</a></h1>
<p>TODO: links to TeX language guides</p>
<p>TODO: document customizations, e.g. <code>\TectonicCodaTokens</code>.</p>
<h1><a class="header" href="#tectonic--x-build" id="tectonic--x-build">tectonic -X build</a></h1>
<p>Build the current document.</p>
<p><em><strong>This is a <a href="v2cli/../ref/v2cli.html">V2 CLI</a> command. For information on the original (“V1”
CLI), see <a href="v2cli/../ref/v1cli.html">its reference page</a>.</strong></em></p>
<h4><a class="header" href="#usage-synopsis" id="usage-synopsis">Usage Synopsis</a></h4>
<pre><code class="language-sh">tectonic -X build
  [--keep-intermediates]
  [--keep-logs]
  [--only-cached]
  [--print]
</code></pre>
<h4><a class="header" href="#remarks" id="remarks">Remarks</a></h4>
<p>This command builds the current document, as identified by searching for a
<a href="v2cli/../ref/tectonic-toml.html">Tectonic.toml</a> file in the current directory or one of its
parents. The build artifacts will be placed into the document’s build output
directory, which defaults to a subdirectory <code>build</code> of the document source
directory.</p>
<h4><a class="header" href="#command-line-options" id="command-line-options">Command-Line Options</a></h4>
<p>The <code>--keep-intermediates</code> option (or <code>-k</code> for short) will cause the engine to
save intermediate files (such as <code>mydoc.aux</code> or <code>mydoc.bbl</code>) in the build output
directory. By default, these files are stored in memory but not actually written
to disk.</p>
<p>The <code>--keep-logs</code> option will cause the engine to save the main TeX log file
(<code>mydoc.log</code>) to disk. By default, this information is discarded.</p>
<p>The <code>--only-cached</code> option (or <code>-C</code> for short) will configure the engine to
refuse to connect to the network when searching for support files. This can be
useful if you’re working on a document in a context where the Internet is
unavailable (e.g., on an airplane). While the engine generally avoids
unnecessary network connections, referencing a new file in your document will
cause it to look for that file in the online support bundle.</p>
<p>The <code>--print</code> option (or <code>-p</code> for short) will cause the engine to print the
regular terminal output of the TeX engine. This output is similar to, but not
identical to, the contents of the log file. By default, this output is only
printed if the engine encounteres a fatal error.</p>
<h1><a class="header" href="#tectonic--x-new" id="tectonic--x-new">tectonic -X new</a></h1>
<p>Create a new Tectonic workspace.</p>
<p><em><strong>This is a <a href="v2cli/../ref/v2cli.html">V2 CLI</a> command. For information on the original (“V1”
CLI), see <a href="v2cli/../ref/v1cli.html">its reference page</a>.</strong></em></p>
<h4><a class="header" href="#usage-synopsis-1" id="usage-synopsis-1">Usage Synopsis</a></h4>
<pre><code class="language-sh">tectonic -X new [DIRECTORY]
</code></pre>
<p>If <code>{DIRECTORY}</code> is unspecified, the workspace is created in the current
directory.</p>
<h4><a class="header" href="#remarks-1" id="remarks-1">Remarks</a></h4>
<p>This command will create a bare-bones <a href="v2cli/../ref/tectonic-toml.html">Tectonic.toml</a> file in the
target directory. The project’s name will be initialized to the name of the
workspace directory.</p>
<p>It will also create placeholder source files in a <code>src</code> subdirectory:
<code>index.tex</code>, <code>_preamble.tex</code>, and <code>_postamble.tex</code>. The default build command
will process these files in the expected order:</p>
<ol>
<li><code>src/_preamble.tex</code></li>
<li><code>src/index.tex</code></li>
<li><code>src/_postamble.tex</code></li>
</ol>
<p>The intention of this framework is to allow you to isolate the main content of
your document from the usual LaTeX boilerplate. There are no restrictions on
what kind of content may be placed in each file, though.</p>
<h1><a class="header" href="#documents" id="documents">Documents</a></h1>
<p><em><strong>This concept only applies to Tectonic’s <a href="ref/./v2cli.html">V2 interface</a>. It is not
relevant <a href="ref/./v1cli.html">the original (“V1”) interface</a>.</strong></em></p>
<p>The fundamental unit of processing in Tectonic is the <em>document</em>. The main
purpose of Tectonic is to compile documents from their TeX source to one or more
output formats.</p>
<h2><a class="header" href="#source-structure" id="source-structure">Source structure</a></h2>
<p>Every Tectonic document is defined by a <a href="ref/./tectonic-toml.html">Tectonic.toml</a> file,
which is found at the root of its source tree. This directory is also the root
of the current Tectonic <a href="ref/./workspaces.html">workspace</a>. At the moment, “workspaces” and “documents”
are the same thing, but in the future it might become possible to define
multiple documents inside a single workspace.</p>
<p>The TeX sources are stored in a <code>src</code> subdirectory of the document root. This
directory should contain at least three files: <code>index.tex</code>, <code>_preamble.tex</code>, and
<code>_postamble.tex</code>. The <a href="ref/../v2cli/build.html"><code>build</code> command</a> will process these
files in the following order:</p>
<ol>
<li><code>src/_preamble.tex</code></li>
<li><code>src/index.tex</code></li>
<li><code>src/_postamble.tex</code></li>
</ol>
<p>The intention of this framework is to allow you to isolate the main content of
your document from the usual LaTeX boilerplate. There are no restrictions on
what kind of content may be placed in each file, though. The preamble and
postamble can be empty if you’d like. The <a href="ref/../v2cli/new.html"><code>new</code> command</a> will stub out
these files for you.</p>
<h2><a class="header" href="#build-structure" id="build-structure">Build structure</a></h2>
<p>Build outputs are placed in the document’s build directory. By default, this is
a <code>build</code> subdirectory of the document root.</p>
<h1><a class="header" href="#the-tectonictoml-file" id="the-tectonictoml-file">The <code>Tectonic.toml</code> File</a></h1>
<p><strong>Starting with <a href="ref/./v2cli.html">the V2 interface</a></strong>, the <code>Tectonic.toml</code> file defines a
Tectonic document.</p>
<h2><a class="header" href="#contents" id="contents">Contents</a></h2>
<p>The <code>Tectonic.toml</code> file is expressed in, yes, <a href="https://toml.io/">TOML</a> format. Allowed items in
the file are detailed below.</p>
<pre><code class="language-toml">[doc]
name = &lt;string&gt;  # the document name
bundle = &lt;url or filesystem path&gt;  # the source of the TeX bundle

[[output]]  # one or more output specifications
name = &lt;string&gt;  # the output's name
type = &lt;&quot;pdf&quot;&gt;  # the output's type
tex_format = [string]  # optional, defaults to &quot;latex&quot;: the TeX format to use
</code></pre>
<p>Unexpected items are not allowed.</p>
<h2><a class="header" href="#items" id="items">Items</a></h2>
<h3><a class="header" href="#docname" id="docname"><code>doc.name</code></a></h3>
<p>The name of the document. This is distinct from the document title. This value
will be used to name output files, so it should be relatively short and
filesystem-friendly.</p>
<h3><a class="header" href="#docbundle" id="docbundle"><code>doc.bundle</code></a></h3>
<p>A string identifying the location of the “bundle” of TeX support files
underyling the processing of the document.</p>
<p>In most circumstances this value should be a URL. The <code>tectonic -X new</code> command
will populate this field with the current recommended default.</p>
<p>This field can also be a filesystem path, pointing to either a Zip-format bundle
or a directory of support files. This mode of operation is discouraged because
it limits reproducibility. URLs with a <code>file:</code> protocol are also treated
identically to filesystem paths.</p>
<h3><a class="header" href="#output" id="output"><code>output</code></a></h3>
<p>A list of dictionaries defining different outputs to be created from the
document source.</p>
<h3><a class="header" href="#outputname" id="outputname"><code>output.name</code></a></h3>
<p>A name given to the output. By default, build products for each output will be
placed in the build directory, in a subdirectory with this name.</p>
<h3><a class="header" href="#outputtype" id="outputtype"><code>output.type</code></a></h3>
<p>The kind of output to create. Currently, the only allowed option is <code>&quot;pdf&quot;</code>,
which creates a <a href="https://en.wikipedia.org/wiki/PDF">Portable Document Format</a> file.</p>
<h3><a class="header" href="#outputtex_format" id="outputtex_format"><code>output.tex_format</code></a></h3>
<p>The TeX “format” of preloaded macros to use when compiling the document. The
default is <code>&quot;latex&quot;</code>, corresponding to the standard LaTeX format. The exact set
of formats that are supported will depend on the bundle that is being used.</p>
<h1><a class="header" href="#v1-default-command-line-interface" id="v1-default-command-line-interface">“V1” (Default) Command Line Interface</a></h1>
<p>Tectonic is distributed as a single executable, <code>tectonic</code>, that is meant to be
invoked from the command line. We’re starting to refer to this program’s
command-line interface as the “V1” interface, because a new <a href="ref/./v2cli.html">“V2”
interface</a> is currently under development.</p>
<p>The V1 interface is “<a href="https://doc.rust-lang.org/rustc/command-line-arguments.html">rustc</a>-like”, offering a single primary workflow with lots
of options controlling its behavior. In comparison, the V2 interface is
“<a href="https://doc.rust-lang.org/cargo/">cargo</a>-like”, with a variety of subcommands anchored around a <a href="ref/./tectonic-toml.html">Tectonic.toml</a>
file defining a document to build.</p>
<h2><a class="header" href="#current-status" id="current-status">Current status</a></h2>
<p><strong>The V1 interface is the default</strong>. If you want to use the V2 interface, you
need to take special steps, as described in <a href="ref/./v2cli.html">its documentation</a>.</p>
<h2><a class="header" href="#basic-usage" id="basic-usage">Basic usage</a></h2>
<p>The V1 interface takes an input TeX file and compiles it. Basic usage is often
as simple as:</p>
<pre><code class="language-sh">tectonic myfile.tex
</code></pre>
<p>This will compile the file and create <code>myfile.pdf</code> if nothing went wrong. You
can use an input filename of <code>-</code> to have Tectonic process standard input. (In
this case, the output file will be named <code>texput.pdf</code>.)</p>
<h2><a class="header" href="#options" id="options">Options</a></h2>
<p>In the V1 interface there are a variety of options that control the engine’s
behavior. If you have Tectonic installed, you can view them with <code>tectonic --help</code>.</p>
<p>The following are the available flags.</p>
<table><thead><tr><th align="left">Short</th><th align="left">Full</th><th align="left">Explanation</th></tr></thead><tbody>
<tr><td align="left"><code>-b</code></td><td align="left"><code>--bundle &lt;PATH&gt;</code></td><td align="left">Use this Zip-format bundle file to find resource files instead of the default</td></tr>
<tr><td align="left"><code>-c</code></td><td align="left"><code>--chatter &lt;LEVEL&gt;</code></td><td align="left">How much chatter to print when running [default: default]  [possible values: default, minimal]</td></tr>
<tr><td align="left"></td><td align="left"><code>--format &lt;PATH&gt;</code></td><td align="left">The name of the &quot;format&quot; file used to initialize the TeX engine [default: latex]</td></tr>
<tr><td align="left"><code>-h</code></td><td align="left"><code>--help</code></td><td align="left">Prints help information</td></tr>
<tr><td align="left"></td><td align="left"><code>--hide &lt;PATH&gt;...</code></td><td align="left">Tell the engine that no file at <code>&lt;PATH&gt;</code> exists, if it tries to read it</td></tr>
<tr><td align="left"><code>-k</code></td><td align="left"><code>--keep-intermediates</code></td><td align="left">Keep the intermediate files generated during processing</td></tr>
<tr><td align="left"></td><td align="left"><code>--keep-logs</code></td><td align="left">Keep the log files generated during processing</td></tr>
<tr><td align="left"></td><td align="left"><code>--makefile-rules &lt;PATH&gt;</code></td><td align="left">Write Makefile-format rules expressing the dependencies of this run to <PATH></td></tr>
<tr><td align="left"><code>-C</code></td><td align="left"><code>--only-cached</code></td><td align="left">Use only resource files cached locally</td></tr>
<tr><td align="left"><code>-o</code></td><td align="left"><code>--outdir &lt;OUTDIR&gt;</code></td><td align="left">The directory in which to place output files [default: the directory containing INPUT]</td></tr>
<tr><td align="left"></td><td align="left"><code>--outfmt &lt;FORMAT&gt;</code></td><td align="left">The kind of output to generate [default: pdf]  [possible values: pdf, html, xdv, aux, format]</td></tr>
<tr><td align="left"></td><td align="left"><code>--pass &lt;PASS&gt;</code></td><td align="left">Which engines to run [default: default]  [possible values: default, tex, bibtex_first]</td></tr>
<tr><td align="left"><code>-p</code></td><td align="left"><code>--print</code></td><td align="left">Print the engine's chatter during processing</td></tr>
<tr><td align="left"><code>-r</code></td><td align="left"><code>--reruns &lt;COUNT&gt;</code></td><td align="left">Rerun the TeX engine exactly this many times after the first</td></tr>
<tr><td align="left"></td><td align="left"><code>--synctex</code></td><td align="left">Generate SyncTeX data</td></tr>
<tr><td align="left"><code>-V</code></td><td align="left"><code>--version</code></td><td align="left">Prints version information</td></tr>
<tr><td align="left"><code>-w</code></td><td align="left"><code>--web-bundle &lt;URL&gt;</code></td><td align="left">Use this URL find resource files instead of the default</td></tr>
</tbody></table>
<h1><a class="header" href="#v2-prototype-command-line-interface" id="v2-prototype-command-line-interface">“V2” (Prototype) Command-Line Interface</a></h1>
<p>The “V2” command-line interface to Tectonic is substantially new interface to
the Tectonic engine introduced in the 0.4.x release series.</p>
<p>In short, the V2 interface is “<a href="https://doc.rust-lang.org/cargo/">cargo</a>-like”, with a variety of subcommands
anchored around a <a href="ref/./tectonic-toml.html">Tectonic.toml</a> file defining a document to build. For
comparison, the original (“V1”) interface is more “<a href="https://doc.rust-lang.org/rustc/command-line-arguments.html">rustc</a>-like”, offering a
single primary workflow with lots of options controlling its behavior.</p>
<h2><a class="header" href="#current-status-1" id="current-status-1">Current status</a></h2>
<p>The V2 interface is currently <strong>available but not the default</strong>. It can be
activated as described below.</p>
<h2><a class="header" href="#activating-the-v2-interface" id="activating-the-v2-interface">Activating the V2 Interface</a></h2>
<p>Because the V2 interface is not the current default, it must be explicitly
activated. There are several ways to do this. One way is to use <code>-X</code> for the
very first command-line argument to the <code>tectonic</code> executable, like so:</p>
<pre><code class="language-sh">tectonic -X build
</code></pre>
<p>It is anticipated that this form of invocation will be supported indefinitely.</p>
<p>Alternatively, if the Tectonic executable is run under a name containing the
string <code>nextonic</code>, the V2 interface will also be enabled. In this case, no <code>-X</code>
is needed (or allowed, at the moment):</p>
<pre><code class="language-sh">nextonic build
</code></pre>
<p>You can use various Unix <code>argv[0]</code> hacks to achieve this, or you can just rename
or symlink the <code>tectonic</code> binary to <code>nextonic</code> manually.</p>
<h2><a class="header" href="#migration-plan" id="migration-plan">Migration plan</a></h2>
<p>The plan is to eventually migrate to make the V2 interface into the default.
This will be implemented as follows:</p>
<ol>
<li>Under the current situation, the V2 interface can be explicitly activated
with the leading <code>-X</code> flag. The V1 interface can be explicitly selected by
using a leading <code>-Y</code> flag. The default is V1.</li>
<li>Once the V2 interface is sufficiently stable, the V1 UI will start
recommending that people adopt it via the <code>-X</code> flag. Users that want to keep
using the V1 interface will be instructed to explicitly select it with the
<code>-Y</code> option.</li>
<li>After a sufficient amount of time, the V1 interface will be flagged as
deprecated.</li>
<li>After more time has passed, the default will flip: if neither <code>-X</code> or <code>-Y</code> is
provided, the V2 interface will be assumed rather than V1.</li>
<li>Eventually, the V1 interface may be entirely removed.</li>
</ol>
<h1><a class="header" href="#workspaces" id="workspaces">Workspaces</a></h1>
<p><em><strong>This concept only applies to Tectonic’s <a href="ref/./v2cli.html">V2 interface</a>. It is not
relevant <a href="ref/./v1cli.html">the original (“V1”) interface</a>.</strong></em></p>
<p>A Tectonic <em>workspace</em> is a directory tree for building documents. The toplevel
directory of a workspace contains a <a href="ref/./tectonic-toml.html">Tectonic.toml</a> file.</p>
<p>At the moment, a workspace contains exactly one <a href="ref/./documents.html">document</a>, having its source
rooted in the workspace root. In the future, Tectonic may be extended so that a
workspace might contain more than one document.</p>
<h1><a class="header" href="#installing-tectonic" id="installing-tectonic">Installing Tectonic</a></h1>
<p>One of the big advantages that Tectonic offers compared to the traditional TeX
stack is that all of Tectonic’s functionality is delivered in a single
executable file — not the usual tree of thousands of interlocking data files and
binary tools.</p>
<p><em><strong>Know what you want? <a href="https://github.com/tectonic-typesetting/tectonic/releases/latest">Download the latest pre-built Tectonic binaries
here</a>.</strong></em></p>
<p>You have several options for installing the Tectonic executable. The best choice
depends on your computing environment and your needs.</p>
<ul>
<li><a href="installation/index.html#direct-download">Direct download</a></li>
<li><a href="installation/index.html#pre-built-binary-packages">Pre-built binary packages</a></li>
<li><a href="installation/index.html#the-cargo-install-method">The <code>cargo install</code> method</a></li>
</ul>
<p>The <a href="installation/index.html#direct-download">direct download</a> method should meet your needs unless
you’re hoping to run Tectonic on an unusual platform, in which case you will
probably need to <a href="installation/index.html#the-cargo-install-method">install Tectonic using Cargo</a>.</p>
<h2><a class="header" href="#direct-download" id="direct-download">Direct download</a></h2>
<p>You can <a href="https://github.com/tectonic-typesetting/tectonic/releases/latest">download the latest release of Tectonic</a> from GitHub. Each
release is published with precompiled executables attached. Because Tectonic is
distributed as a single executable, all you need to do is download the
appropriate archive for your platform.</p>
<p>For instance, on most Linux systems, you’ll want to download the file with the
name looking like <code>tectonic-&lt;VERSION&gt;-x86_64-unknown-linux-gnu.tar.gz</code>. This
tarball will unpack to a single file, <code>tectonic</code>, that is the Tectonic
executable.</p>
<h2><a class="header" href="#pre-built-binary-packages" id="pre-built-binary-packages">Pre-built binary packages</a></h2>
<p>Tectonic may be available in precompiled packages offered by either your
operating system or standalone package managers. Check out <a href="https://github.com/tectonic-typesetting/tectonic/#readme">the Tectonic source
repository</a> for an up-to-date listing.</p>
<p>In most cases, the package name will be <code>tectonic</code> and it will provide a
command-line tool also named <code>tectonic</code>.</p>
<h3><a class="header" href="#pre-built-packages-for-anaconda" id="pre-built-packages-for-anaconda">Pre-built packages for Anaconda</a></h3>
<p>Tectonic is available for the <a href="https://docs.conda.io/">Conda package manager</a>, which has the
advantages of (1) not requiring any administrator privileges and (2) supporting
Windows, macOS, and Linux. If you’d like to install Tectonic using a package
manager and you’re not aware of a different option that’s a better fit for your
needs, we recommend using Conda.</p>
<p>If you don’t already have Conda installed, we recommend that you <a href="https://docs.conda.io/en/latest/miniconda.html">install the
“Miniconda” package</a> provided by <a href="https://www.anaconda.com/">Anaconda, Inc.</a>. Once
complete, the command <code>conda</code> will now be available in your terminal.</p>
<p>Once the <code>conda</code> command is available, you can install Tectonic and its support
libraries using <a href="http://conda-forge.github.io/">conda-forge</a>, a community-led
Conda packaing project. To install Tectonic you must activate conda-forge, which
can be done temporarily like so:</p>
<pre><code class="language-sh">conda install -c conda-forge tectonic
</code></pre>
<h2><a class="header" href="#the-cargo-install-method" id="the-cargo-install-method">The <code>cargo install</code> method</a></h2>
<p>If your system has C++ and Rust compilers installed, you can install Tectonic
using Rust’s packaging tool, <a href="http://doc.crates.io/index.html">cargo</a>. Make sure
that Rust's <code>bin</code> folder (<code>$HOME/.cargo/bin</code> by default) is in your <code>$PATH</code>.</p>
<p>Tectonic currently requires various system support libraries to be installed.
This is the most likely cause of difficulty installing Tectonic. These libraries are:</p>
<ul>
<li><a href="https://fontconfig.org/">fontconfig</a> (except on macOS)</li>
<li><a href="https://www.freetype.org/">freetype2</a></li>
<li><a href="https://graphite.sil.org/">graphite2</a></li>
<li><a href="https://harfbuzz.github.io/">harfbuzz</a></li>
<li><a href="http://site.icu-project.org/home">ICU4C</a></li>
<li><a href="http://www.libpng.org/">libpng</a></li>
<li><a href="https://zlib.net/">zlib</a></li>
</ul>
<p>There is significant interest in reducing the number of external dependencies to
ease the build process, but the above is where things currently stand.</p>
<h3><a class="header" href="#debian-and-ubuntu-linux" id="debian-and-ubuntu-linux">Debian and Ubuntu Linux</a></h3>
<p>Ensure that the requisite packages are installed with the following command:</p>
<pre><code class="language-sh">sudo apt-get install libfontconfig1-dev libgraphite2-dev libharfbuzz-dev libicu-dev libssl-dev zlib1g-dev
</code></pre>
<p>Once that is done, the following should be sufficient to download and install
the latest Tectonic release:</p>
<pre><code class="language-sh">cargo install tectonic
</code></pre>
<h3><a class="header" href="#rhel-centos-or-fedora-linux" id="rhel-centos-or-fedora-linux">RHEL, CentOS, or Fedora Linux</a></h3>
<p>Ensure that the requisite packages are installed with the following command:</p>
<pre><code class="language-sh">sudo dnf install fontconfig-devel graphite2-devel harfbuzz-devel libicu-devel openssl-devel zlib-devel
</code></pre>
<p>Once that is done, the following should be sufficient to download and install
the latest Tectonic release:</p>
<pre><code class="language-sh">cargo install tectonic
</code></pre>
<h3><a class="header" href="#macos--os-x-with-homebrew" id="macos--os-x-with-homebrew">MacOS / OS X, with Homebrew</a></h3>
<p>To <code>cargo install</code> Tectonic on macOS, the recommended way to install the
required dependencies is with <a href="http://brew.sh">Homebrew</a>. Note, however, that
you can also just directly install <code>tectonic</code>  with Homebrew as well. If you
want to compile it yourself, the following commands will install the required
formulae:</p>
<pre><code class="language-sh">brew install --only-dependencies tectonic
brew install pkg-config
</code></pre>
<p>If the Rust build program <code>cargo</code> not available, also run:</p>
<pre><code class="language-sh">brew install rust
</code></pre>
<p>The <code>cargo</code> invocation is then as normal, but you must set up some auxiliary
environment variables as well:</p>
<pre><code class="language-sh">export DEP_OPENSSL_INCLUDE=$(brew --prefix openssl)/include
export PKG_CONFIG_PATH=/usr/local/opt/icu4c/lib/pkgconfig
cargo install tectonic
</code></pre>
<p>Alternatively, you can build tectonic from source by running</p>
<pre><code class="language-sh">brew install --build-from-source tectonic
</code></pre>
<h2><a class="header" href="#other-methods" id="other-methods">Other methods</a></h2>
<p>See also some pages in the “Cookbooks” section of this book for more specialized
instructions.</p>
<h1><a class="header" href="#build-tectonic-with-vcpkg-on-windows-linux-or-macos" id="build-tectonic-with-vcpkg-on-windows-linux-or-macos">build tectonic with vcpkg on Windows, Linux or macOS</a></h1>
<h2><a class="header" href="#prerequisites" id="prerequisites">prerequisites</a></h2>
<p>This guide assumes you have <a href="https://git-scm.com/">git</a> installed and are
comfortable using the command-line.</p>
<h2><a class="header" href="#setting-up-your-environment" id="setting-up-your-environment">setting up your environment</a></h2>
<p>If you are running macOS prior to 10.15 (Catalina), or a version of Xcode that is not up to date, you may need to <a href="cookbook/cargo-vcpkg.html#Install-gcc-on-macOS">install gcc</a>. Windows and Linux should be ready to go if you have a recent compiler installed.</p>
<h2><a class="header" href="#install-cargo-vcpkg" id="install-cargo-vcpkg">Install cargo-vcpkg</a></h2>
<pre><code class="language-sh">cargo install cargo-vcpkg
</code></pre>
<h2><a class="header" href="#install-tectonic-dependencies-using-vcpkg" id="install-tectonic-dependencies-using-vcpkg">Install tectonic dependencies using vcpkg</a></h2>
<pre><code class="language-sh">$ cargo vcpkg build
		Cloning https://github.com/microsoft/vcpkg
	cargo build
		Checkout rev 6d36e2a
	Compiling vcpkg
	Installing freetype harfbuzz[icu,graphite2]
	Compiling bzip2 (triplet x64-osx)
	Compiling zlib (triplet x64-osx)
	Compiling libpng (triplet x64-osx)
	Compiling freetype (triplet x64-osx)
	Compiling libiconv (triplet x64-osx)
	Compiling gettext (triplet x64-osx)
	Compiling graphite2 (triplet x64-osx)
	Compiling icu (triplet x64-osx)
	Compiling ragel (triplet x64-osx)
	Compiling harfbuzz (triplet x64-osx)
		Finished in 247.89s

</code></pre>
<h2><a class="header" href="#build-tectonic" id="build-tectonic">Build tectonic</a></h2>
<p>Now we need to configure tectonic so it knows we are using <code>vcpkg</code> to build
the binary. This is done by setting the <code>TECTONIC_DEP_BACKEND</code> environment variable. <code>TECTONIC_DEP_BACKEND=&quot;vcpkg&quot;</code> tells <code>tectonic</code> to use <code>vcpkg</code> instead of trying to resolve the libraries using <code>pkgconfig</code>.</p>
<p>For Linux and macOS, run <code>cargo build</code> with the appropriate environment variables, like this:</p>
<pre><code class="language-sh">TECTONIC_DEP_BACKEND=&quot;vcpkg&quot; cargo build --release
</code></pre>
<p>Or on Windows, like this for powershell:</p>
<pre><code class="language-bat">$Env:TECTONIC_DEP_BACKEND=&quot;vcpkg&quot;
$Env:RUSTFLAGS=&quot;-Ctarget-feature=+crt-static&quot;
cargo build --release
</code></pre>
<p>Or like this for cmd:</p>
<pre><code class="language-bat">set TECTONIC_DEP_BACKEND=&quot;vcpkg&quot;
set RUSTFLAGS=&quot;-Ctarget-feature=+crt-static&quot;
cargo build --release
</code></pre>
<p>This will take a couple of minutes but should eventually print something like:</p>
<pre><code class="language-sh">    Finished release [optimized] target(s) in 3m 39s
</code></pre>
<p>The binary should be in <code>target/release</code>.</p>
<h2><a class="header" href="#install-gcc-on-macos" id="install-gcc-on-macos">Install gcc on macOS</a></h2>
<p>If the <code>cargo vcpkg build</code> step fails on macOS, you may need to install another compiler. One way to do this is using <a href="https://brew.sh/">homebrew</a> to install gcc.</p>
<pre><code class="language-sh">brew install gcc
</code></pre>
<h1><a class="header" href="#build-tectonic-with-vcpkg-on-macos" id="build-tectonic-with-vcpkg-on-macos">build tectonic with vcpkg on macOS</a></h1>
<p>This tutorial will walk you through how to build a <em>mostly</em> staticly linked
<code>tectonic</code> binary on macOS. Why does this matter? Static binaries are more
portable and so free you from having to support complex user environments.
Thanks to
<a href="https://github.com/tectonic-typesetting/tectonic/pull/420">mcgoo's work</a> we can
use <code>vcpkg</code>. <a href="https://vcpkg.readthedocs.io/en/latest/">vcpkg</a> is a C/C++ package
manager from Microsoft.</p>
<h2><a class="header" href="#prerequisites-1" id="prerequisites-1">prerequisites</a></h2>
<p>This guide assumes you have <a href="https://git-scm.com/">git</a> installed and are
comfortable using the command-line. You'll also need to install
<a href="https://brew.sh/">homebrew</a> to install for <code>vcpkg</code>'s gcc dependency. Package
management is <em>fun</em>.</p>
<ol>
<li>install <code>gcc</code>:</li>
</ol>
<pre><code class="language-sh">brew install gcc
</code></pre>
<h2><a class="header" href="#setting-up-your-environment-1" id="setting-up-your-environment-1">setting up your environment</a></h2>
<ol>
<li>
<p>Install vcpkg</p>
<ol>
<li>Clone the vcpkg repository:
<pre><code class="language-sh">git clone https://github.com/Microsoft/vcpkg
</code></pre>
</li>
<li>Install it for your system:
<pre><code class="language-sh">./bootstrap-vcpkg.sh
</code></pre>
</li>
</ol>
</li>
<li>
<p>Install <code>tectonic</code> dependencies using vcpkg. * Run the following command in
your checkout of the <code>vcpkg</code> repository
<code>sh ./vcpkg install freetype harfbuzz\[icu,graphite2\]</code> It should print
something like the following:</p>
<pre><code class="language-sh">$ ./vcpkg install freetype harfbuzz\[icu,graphite2\]
The following packages will be built and installed:
* bzip2[core]:x64-osx
	freetype[core]:x64-osx
* gettext[core]:x64-osx
* graphite2[core]:x64-osx
	harfbuzz[core,graphite2,icu,ucdn]:x64-osx
* icu[core]:x64-osx
* libiconv[core]:x64-osx
* libpng[core]:x64-osx
* ragel[core]:x64-osx
* zlib[core]:x64-osx
Additional packages (*) will be modified to complete this operation.
Starting package 1/10: graphite2:x64-osx
Building package graphite2[core]:x64-osx...
</code></pre>
</li>
</ol>
<h2><a class="header" href="#build-tectonic-1" id="build-tectonic-1">build tectonic</a></h2>
<p>Now we only need to configure tectonic so it knows we are using <code>vcpkg</code> to build
the binary.</p>
<ol>
<li>Run <code>cargo build</code> with the appropriate environment variables:
<pre><code class="language-sh">TECTONIC_DEP_BACKEND=&quot;vcpkg&quot; VCPKG_ROOT=/Users/me/vcpkg/ cargo build --release
</code></pre>
</li>
</ol>
<p>You'll need to set <code>VCPKG_ROOT</code> to the full path of your vcpkg checkout.
<code>TECTONIC_DEP_BACKEND=&quot;vcpkg&quot;</code> tells <code>tectonic</code> to use <code>vcpkg</code> instead of trying
to resolve the libraries using <code>pkgconfig</code>. <code>VCPKG_ROOT=/Users/me/vcpkg/</code> is the
root of the <code>vcpkg</code> tree where we just installed the required libraries.</p>
<p>This will take a couple minutes but should eventually print something like:</p>
<pre><code class="language-sh">    Finished release [optimized] target(s) in 3m 39s
</code></pre>
<p>Congratulations! You should now have a mostly staticly linked binary in
<code>target/release</code> suitable for sharing with users or whatever your needs are.</p>
<h2><a class="header" href="#caveats" id="caveats">caveats</a></h2>
<p>I say <em>mostly</em> staticly linked because the binary itself presumes system
libraries. You can observe those links by executing <code>otool</code> on a given binary:</p>
<pre><code class="language-sh">otool -L target/release/tectonic
</code></pre>
<p>In my case it printed the following:</p>
<pre><code class="language-sh">target/release/tectonic:
	/System/Library/Frameworks/Foundation.framework/Versions/C/Foundation (compatibility version 300.0.0, current version 1454.98.0)
	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 1454.98.0)
	/System/Library/Frameworks/CoreGraphics.framework/Versions/A/CoreGraphics (compatibility version 64.0.0, current version 1161.21.2)
	/System/Library/Frameworks/CoreText.framework/Versions/A/CoreText (compatibility version 1.0.0, current version 1.0.0)
	/System/Library/Frameworks/AppKit.framework/Versions/C/AppKit (compatibility version 45.0.0, current version 1561.60.100)
	/usr/lib/libc++.1.dylib (compatibility version 1.0.0, current version 400.9.0)
	/System/Library/Frameworks/Security.framework/Versions/A/Security (compatibility version 1.0.0, current version 58286.70.14)
	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1252.50.4)
	/usr/lib/libresolv.9.dylib (compatibility version 1.0.0, current version 1.0.0)
	/usr/lib/libobjc.A.dylib (compatibility version 1.0.0, current version 228.0.0)
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
